classdef AttributeAngular < simulator.dynamic.AttributeBase
  %ATTRIBUTESTATIC Summary of this class goes here
  %   Detailed explanation goes here
  
  properties
    Velocity;
  end
  
  methods
    function obj = AttributeAngular(default, v)
      isargcoord(default);
      if (nargin < 3)
        v = inf;
      else
        isargpositivescalar(v);
      end
      
      % call constructor of base class
      obj = obj@simulator.dynamic.AttributeBase(default);
      
      obj.Velocity = v;
      obj.Dynamic = isinf(v);  
      obj.Current = default;
      obj.Target = default;
    end
    function obj = refresh(obj, T)
      if obj.Dynamic
        isargpositivescalar(T);
        
        delta = acosd((obj.Target'*obj.Current)/ ...
          (norm(obj.Target)*norm(obj.Current)));
        
        rotaxis = cross(obj.Current, obj.Target)/ ...
          (norm(obj.Target)*norm(obj.Current));
        
        if (norm(rotaxis) > 1e-5) 
          rotaxis = rotaxis./       
        else
            delta = 
        end
        
        inc = sign(delta).*min(abs(obj.Velocity)*T,abs(delta));
        obj.Current = obj.Current + inc;
      end
    end
  end
  %% setter, getter
  methods
    function obj = set.Velocity(obj,v)
      isargpositivescalar(v);
      obj.Dynamic = isinf(v);
      obj.Velocity = v;
    end
  end  
end

